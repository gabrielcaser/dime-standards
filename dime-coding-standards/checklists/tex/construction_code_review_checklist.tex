\documentclass{tufte-handout}

\usepackage{librecaslon}


\usepackage{fancyhdr}
\usepackage{hyperref}
\usepackage{tcolorbox} % needed for the text boxes
\usepackage{xcolor}
\usepackage{setspace}
\usepackage{graphics}
\hypersetup{
	colorlinks=true,
	linkcolor=blue,
	urlcolor=cyan,
}
% Set header and footer
\pagestyle{fancy}
\fancyhf{}
\lfoot{\includegraphics[height=1cm,keepaspectratio]{../../img/i2i}}
\cfoot{\includegraphics[height=1cm,keepaspectratio]{../../img/wb}}
\rfoot{\includegraphics[height=1cm,keepaspectratio]{../../img/analytics}}

% Put checkbox to the left of the text
\def\LayoutCheckField#1#2{% label, field
	#2 #1%
}

% Line spacing
\onehalfspacing

% Define DIME Analytics visual identity colors
\definecolor{fontcolor}{HTML}{7A0569}

\titleformat{\section}%
{\Large\rmfamily\bf\color{fontcolor}}% format applied to label+text
{\llap{\colorbox{fontcolor}{\parbox{1.5cm}{\hfill\huge\color{fontcolor}\thesection}}}}% label
{2pt}% horizontal separation between label and title body
{}% before the title body
[]% after the title body

\titleformat{\subsection}%
{\large\rmfamily\color{fontcolor}}% format applied to label+text
{}% label
{1.5pt}% horizontal separation between label and title body
{}% before the title body
[]% after the title body

\newcommand{\dimeCheckBox}[1]{\CheckBox[height=0.01cm, width=0.4cm, bordercolor=gray]{#1}}
\newcommand{\dimeTextField}[3]{\TextField[name=#1, height=0.3cm, width=#2, bordercolor=gray]{#3}}


\newcommand{\titleBox}[1]{
	\begin{tcolorbox}
		[colframe = fontcolor,
		colback = fontcolor,
		sharp corners,
		halign = flush center,
		valign = center,
		height = 0.3\textwidth,
		after skip = 1cm]
		#1
	\end{tcolorbox}
}

\begin{document}
	\begin{fullwidth}
		
		\titleBox{
			\textcolor{white}{\LARGE{\textbf{DIME Analytics \\ Peer Code Review - Construction Checklist}} \\
				\Large\textbf{{v1.0}}}
		}

  \dimeTextField{time}{2.5 cm}{Reviewer:} 

        \dimeTextField{time}{2.5 cm} {Coder:}
		
		\textbf{NOTE:} Make sure that fill out this checklist \textbf{ONLY IF} your partner's submission includes    \textbf{construction} tasks. 
		
		\section*{Indicator construction tasks}
  This checklist lists important factors to consider while reviewing your code review partner's \textbf{construction} scripts/code. Please fill this checklist, and submit it as an attachment when you submit \href{https://survey.wb.surveycto.com/collect/code_review_summary?caseid=}{this detailed form.}

  \subsection*{Construction script}
		
		\begin{itemize}
			\setlength\itemsep{-0.1em}
			\item[] \dimeCheckBox{I understand how and why each variable is constructed.}
            \dimeTextField{comment1}{10cm}{In some cases, it was not clear - need more comments in the following lines of code:}

            \dimeCheckBox{\textbf{Check merges:}} 
            
            \begin{itemize}
                \item[] \dimeCheckBox{If any observations are dropped, there is a clear justification in the code}
                \item[] \dimeCheckBox{If the number of observations increase/decrease, there is a clear justification in the code}
            \end{itemize}

            \dimeCheckBox{\textbf{Check collapses, reshapes, and group-wise calculations (e.g. \texttt{bysort} and \texttt{egen}):}} 
            
            \begin{itemize}
                \item[] \dimeCheckBox{The code clearly explains how missing values are treated in these operations}
                \item[] \dimeCheckBox{If the sort order of data matters, stable sorts are used (e.g. using \textbf{\texttt{set seed})}}
            \end{itemize}

            \dimeCheckBox{\textbf{Check winsorization and other techniques for handling outliers}} 
            
            \begin{itemize}
                \item[] \dimeCheckBox{The reason for the chosen technique/method is clearly explained}
                \item[] \dimeCheckBox{There is documentation explaining how parameters such as cutoff percentiles were chosen and why one or both tails were altered \textbf{(if applicable)}}
            \end{itemize}

             \dimeCheckBox{\textbf{Check creation of new variables:}} 
            
            \begin{itemize}
                \item[] \dimeCheckBox{The code matches the variable definition in the documentation (such as a codebook of all variables)?}
                \item[] \dimeCheckBox{The correct function is used and clearly explained}
              
            \end{itemize}

    \subsection*{Constructed dataset}     
        \begin{itemize}
                \item[] \dimeCheckBox{The constructed dataset is tidy (that is, \textbf{each row is an observation}, AND\textbf{ each variable is a column}}
                \item[] \dimeCheckBox{\textbf{Variable names} are informative}
                \item[] \dimeCheckBox{\textbf{Variable labels} are informative}
                \item[] \dimeCheckBox{\textbf{Value labels} are informative}
                \item[] \dimeCheckBox{All labels are grammatically correct and free of special characters}
                \item[] \dimeCheckBox{There is clear documentation (variable dictionary, variable labels, value labels, notes, comments) about variable definition? (e.g. codebook constructed using \textbf{\texttt{iecodebook}})}
                 
                
            \end{itemize}

            
		\vspace{.6em}


	\end{fullwidth}
\end{document}
